---
title: "Abstract Syntax Tree"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{ast}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(multimod)
library(lobstr)
library(visNetwork)
```

## Example equation #1
```{r}
mm <- example_model$model_info |> as_multimod()
# eq <- example_model$multimod$equations$eqTechCapUp
eq <- mm$equations$eqTechCapUp
print(eq$name); print(eq$desc)
names(eq)
```

### Full tree structure
```{r}
depth(eq)
tree(eq, max_depth = 5)
```

### Network representation
```{r}
eq_net <- multimod::get_network_data(eq)
visNetwork(eq_net$nodes, eq_net$edges) |>
  visOptions(highlightNearest = TRUE, nodesIdSelection = TRUE) |>
  visHierarchicalLayout(direction = "LR")  

```

## Example equation #2
```{r}
eq <- example_model$multimod$equations$eqTechAInp
print(eq$name); print(eq$desc)
```

### Partial tree structure
```{r}
tree(eq, max_depth = 3)
```

### Network representation
```{r}
eq_net <- get_network_data(eq)
visNetwork(eq_net$nodes, eq_net$edges) |>
  visOptions(highlightNearest = TRUE, nodesIdSelection = TRUE) |>
  visInteraction(navigationButtons = TRUE) |>
  visHierarchicalLayout(direction = "LR")
```

